<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; mattock-0.7.0 RDoc
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'>
<h2 id="label-Mattock">Mattock</h2>

<h3 id="label-A+powerful+companion+to+Rake">A powerful companion to Rake</h3>

<p>The goal for Mattock is to be able to build configurable, composable
tasklibs for Rake quickly, and get validation that they're working
properly.</p>

<p>Throughout, the goal has been to lean hard on straight up Ruby, with as
little metaprogrammitic DSL nonsense as I could get away with.</p>

<p>In fact, basically the only DSL stuff in Mattock are settings for Tasklibs.
The gory details are in <span class='object_link'><a href="Mattock/Configurable.html" title="Mattock::Configurable (module)">Mattock::Configurable</a></span>.  Inheritable, defaultable,
verifying, copyable settings.  Nothing you haven't seen done before.</p>

<h3 id="label-Tasklibs">Tasklibs</h3>

<p>The upshot of Mattock is being able to build Rake Tasklibs so that you can
do things like:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tk'>tk</span> <span class='op'>=</span> <span class='const'>Toolkit</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tk'>tk</span><span class='op'>|</span>
  <span class='id identifier rubyid_tk'>tk</span><span class='period'>.</span><span class='id identifier rubyid_file_lists'>file_lists</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>__FILE__</span><span class='rbracket'>]</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tk'>tk</span><span class='period'>.</span><span class='id identifier rubyid_in_namespace'>in_namespace</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_vc'>vc</span> <span class='op'>=</span> <span class='const'>Git</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_tk'>tk</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='op'>|</span><span class='id identifier rubyid_vc'>vc</span><span class='op'>|</span> <span class='id identifier rubyid_vc'>vc</span><span class='period'>.</span><span class='id identifier rubyid_branch'>branch</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>master</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_task'>task</span> <span class='id identifier rubyid_tk'>tk</span><span class='period'>.</span><span class='id identifier rubyid_finished_files'>finished_files</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vc'>vc</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>is_checked_in</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<p>Things of note there: the "Git" tasklib takes the Toolkit tasklib as an
argument.  Git can pull out settings from Toolkit.  (Conversely, that means
as these tasklibs are designed, common settings can be pulled up into
parent tasklibs.)  Libs with related concerns can get hooked together and
still remain loosely coupled.</p>

<p>Also note that Toolkit has a nested setting - settings can be arranged in
namespaces, however that makes sense.</p>

<p><span class='object_link'><a href="Mattock/TaskLib.html" title="Mattock::TaskLib (class)">Mattock::TaskLib</a></span> also codifies the typical pattern with Rake tasklibs:
setup default configuration, yield self, confirm configs, define tasks.
Configuration is held in "settings," which mean defaults are easier to
track, complex configs can be resolved after setup, and required values
automatically confirmed.</p>

<p>A nice side effect is that "misconfiguration" - i.e. assigning a value to
the wrong name - gets caught really quickly, which you come to appreciate
in complex Rakefiles.</p>

<h3 id="label-Tasks">Tasks</h3>

<p><span class='object_link'><a href="Mattock/Task.html" title="Mattock::Task (class)">Mattock::Task</a></span> defines subclasses of Rake tasks - they can do all the
configuration that Mattock::TaskLib can, but they're just tasks. 
Crucially, details about whether they're needed can be overriden. 
Occasionally handy.</p>
</div>
  <h2>Mattock Tasklibs Defined</h2>
  <ul>
    
      <li><span class='object_link'><a href="Mattock/TaskLib.html" title="Mattock::TaskLib (class)">Mattock::TaskLib</a></span></li>
    
      <li><span class='object_link'><a href="Mattock/TemplateTask.html" title="Mattock::TemplateTask (class)">Mattock::TemplateTask</a></span></li>
    
      <li><span class='object_link'><a href="Mattock/CascadingDefinition.html" title="Mattock::CascadingDefinition (module)">Mattock::CascadingDefinition</a></span></li>
    
  </ul>

  For more information about Mattock, check out <a href="https://rubygems.org/gems/mattock">the page on Rubygems</a> or <a href="http://nyarly.github.com/mattock/">the documentation on github</a>

</div>

    <div id="footer">
  Generated on Tue Nov 26 00:40:42 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-1.9.3).
</div>

  </body>
</html>